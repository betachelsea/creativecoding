---
layout: work
title:  "Shadows"
date:   2026-01-01 00:00:00 +0900
desc: "Create an invisible object where only the shadows can be seen. #genuary 2026"
---

<script type="text/ruby">
CANVAS_HEIGHT = 750
CANVAS_WIDTH = 750

BALL_X = 200
FLOOR_Y = 400
RADIUS = 60

FRAMERATE = 60
H = 300 # 跳ねる高さ
OMEGA = (Math::PI * 2) / 3.0 # 1.5秒で1バウンス # 混乱するので整理
MIN_SCALE = 0.4
MAX_SCALE = 1.6

def setup
  createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT)
  frameRate(FRAMERATE)
  $phase = 0
  $base_x = 0
end

def lerp(a, b, t) # 線形補間
  a + (b - a) * t
end

def draw_shadow(ball_x, floor_y, phase)
  strokeWeight(0);

  phase %= (Math::PI * 2)
  u = Math.sin(phase).abs
  h = H * (u ** 0.7)
  hn = h / H

  shadow_scale = lerp(MIN_SCALE, MAX_SCALE, hn ** 0.8)

  blur = lerp(2, 8, (hn ** 1.0)) # 2〜8の数値をhnに応じて計算
  drawingContext.filter = "blur(#{blur}px)"
  alpha = lerp(0.35, 0.1, (hn ** 1.2))
  fill("rgba(0,0,0,#{alpha})")
  ellipse(ball_x, floor_y, (RADIUS * 1.6) * shadow_scale, (RADIUS * 1.0) * shadow_scale); # 影3

  fill("red")
  drawingContext.filter = "none";
  # ellipse(ball_x, floor_y - h, RADIUS * 2, RADIUS * 2)
end

def draw
  clear
  dt = deltaTime / 1000.0 # milliseconds
  $phase += dt * OMEGA
  $phase %= (Math::PI * 2) # 2πを超えないようにする
  $base_x += 3
  $base_x %= CANVAS_WIDTH
  draw_shadow($base_x + 0,400,$phase)
  draw_shadow($base_x + 50,400,$phase + (Math::PI * 0.25)) # ズラす
  draw_shadow(300,400,$phase + (Math::PI * 0.50)) # ズラす
  draw_shadow(400,400,$phase + (Math::PI * 0.75)) # ズラす
end

P5::init()
</script>
<p>hello</p>
