---
layout: work
title:  "Arrow Typhoon"
date:   2026-01-25 00:00:00 +0900
desc: "Organic Geometry. Forms that look or act organic but are constructed entirely from geometric shapes. #genuary 2026"
---

<script type="text/ruby">
FRAMERATE = 60
ARROWS_COUNT = 100

class Arrow
    def initialize
        @cx = rand(-50..800)
        @cy = rand(-50..800)
        @th = rand(0..(2 * Math::PI))
        @length = 20
        @per_second =  rand(100.0..400.0)
        @flow_power = rand(10.0..30.0)
        @outflow_r = rand(30.0..100.0)
        @inflow_r = @outflow_r + rand(100.0..200.0)
        @flow_v = 1 # 流入
    end

    def px
      @cx + @length * Math.cos(@th)
    end

    def py
      @cy + @length * Math.sin(@th)
    end

    def move(dt, goal_x, goal_y)
        dx = @cx - goal_x
        dy = @cy - goal_y
        r = Math.hypot(dx, dy) # 中央(カーソル)からの距離
        r = 0.0001 if r < 0.0001
        rx = dx / r # 中央からの距離
        ry = dy / r

        # (rx,ry)の向きを左に90度傾けて進む
        tx = -dy / r
        ty = dx / r

        if @flow_v == 1 && r < @outflow_r
            @flow_v = -1
        elsif @flow_v == -1 && @inflow_r < r
            @flow_v = 1
        end

        vx = tx * @per_second - rx * (@flow_power * @flow_v)
        vy = ty * @per_second - ry * (@flow_power * @flow_v)
        @cx += vx * dt
        @cy += vy * dt
        @th = Math.atan2(vy,vx)
    end

    def draw
        line(@cx, @cy, px, py) # 真ん中

        rx = @cx + (@length/2.0) * Math.cos(@th + Math::PI * 3/4)
        ry = @cy + (@length/2.0) * Math.sin(@th + Math::PI * 3/4)
        line(@cx, @cy, rx, ry) # 右

        lx = @cx + (@length/2.0) * Math.cos(@th - Math::PI * 3/4)
        ly = @cy + (@length/2.0) * Math.sin(@th - Math::PI * 3/4)
        line(@cx, @cy, lx, ly) # 左

        line(rx, ry, px, py)
        line(lx, ly, px, py)
    end
end

def setup
  createCanvas(windowWidth, windowHeight)
  frameRate(FRAMERATE)
  $arrows = ARROWS_COUNT.times.map { Arrow.new }
end

def draw
  clear
  background(0, 0, 0)
  stroke(255, 255, 255)
  dt = deltaTime / 1000.0 # milliseconds
  $arrows.each do |arrow|
    arrow.move(dt, mouseX, mouseY)
    arrow.draw
  end
end

def windowResized
  resizeCanvas(windowWidth, windowHeight)
end

P5::init()
</script>
