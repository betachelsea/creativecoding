---
layout: work
title:  "Wind arrows"
date:   2026-01-16 00:00:00 +0900
desc: "Organic Geometry. Forms that look or act organic but are constructed entirely from geometric shapes. #genuary 2026"
---

<script type="text/ruby">
CANVAS_HEIGHT = 750
CANVAS_WIDTH = 750
FRAMERATE = 60

class Arrow
    def initialize
        @cx = 300 # debug @cx = rand(-50..800)
        @cy = 300 # debug @cy = rand(-50..800)
        @th = rand(0..(2 * Math::PI))
        @length = 20
        @per_second = rand(10.0..100.0)
        @rotation_speed = rand((Math::PI/20.0)..(Math::PI/4.0))
        @rotation_speed = Math::PI/4.0 # debug
    end

    def px
      @cx + @length * Math.cos(@th)
    end

    def py
      @cy + @length * Math.sin(@th)
    end

    def move(dt, goal_x, goal_y)
        distance = @per_second * dt # 進む距離
        # 回転角度
        th_pc = Math.atan2(self.py - @cy, self.px - @cx) # p = point = 先端
        th_gc = Math.atan2(goal_y - @cy, goal_x - @cx)
        theta = th_gc - th_pc
        text("角度差:#{theta}", 20, 80) # うーん?
        rotate = @rotation_speed * dt # 回転速度
        @th = @th - rotate
        #@th = @th - rotate if theta < 0
        #@th = @th + rotate if theta > 0
        @cx = @cx + distance * Math.cos(@th) #  NO: @th
        @cy = @cy + distance * Math.sin(@th)
    end

    def draw
        line(@cx, @cy, px, py) # 真ん中

        rx = @cx + (@length/2.0) * Math.cos(@th + Math::PI * 3/4)
        ry = @cy + (@length/2.0) * Math.sin(@th + Math::PI * 3/4)
        line(@cx, @cy, rx, ry) # 右

        lx = @cx + (@length/2.0) * Math.cos(@th - Math::PI * 3/4)
        ly = @cy + (@length/2.0) * Math.sin(@th - Math::PI * 3/4)
        line(@cx, @cy, lx, ly) # 左

        line(rx, ry, px, py)
        line(lx, ly, px, py)
    end
end

def setup
  createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT)
  frameRate(FRAMERATE)
  $arrows = 1.times.map { Arrow.new }
end

def draw
  clear
  dt = deltaTime / 1000.0 # milliseconds
  $arrows.each do |arrow|
    arrow.move(dt, mouseX, mouseY)
    arrow.draw
  end
  text("dt:#{dt}", 20, 20)
  text("mouse:#{mouseX},#{mouseY}", 20, 50)
end

P5::init()
</script>
