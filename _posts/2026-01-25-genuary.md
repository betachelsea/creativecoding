---
layout: work
title:  "Wind arrows"
date:   2026-01-16 00:00:00 +0900
desc: "Organic Geometry. Forms that look or act organic but are constructed entirely from geometric shapes. #genuary 2026"
---

<script type="text/ruby">
CANVAS_HEIGHT = 750
CANVAS_WIDTH = 750
FRAMERATE = 60
ARROWS_COUNT = 80

class Arrow
    def initialize
        @cx = rand(-50..800)
        @cy = rand(-50..800)
        @th = rand(0..(2 * Math::PI))
        @length = 20
        @per_second =  rand(100.0..400.0)
        @rotation_speed = rand((Math::PI/20.0)..(Math::PI/4.0))
        @rotation_speed = Math::PI/4.0 # debug
        @a = 100 # 楕円運動の長半径
        @b = 120 # 楕円運動の短半径
    end

    def px
      @cx + @length * Math.cos(@th)
    end

    def py
      @cy + @length * Math.sin(@th)
    end

    def move(dt, goal_x, goal_y)
        dx = @cx - goal_x
        dy = @cy - goal_y
        r = Math.hypot(dx, dy)
        r = 0.0001 if r < 0.0001

        # 左回り
        tx = -dy / r
        ty = dx / r

        @cx += tx * @per_second * dt
        @cy += ty * @per_second * dt
        @th = Math.atan2(ty, tx)
    end

    def draw
        line(@cx, @cy, px, py) # 真ん中

        rx = @cx + (@length/2.0) * Math.cos(@th + Math::PI * 3/4)
        ry = @cy + (@length/2.0) * Math.sin(@th + Math::PI * 3/4)
        line(@cx, @cy, rx, ry) # 右

        lx = @cx + (@length/2.0) * Math.cos(@th - Math::PI * 3/4)
        ly = @cy + (@length/2.0) * Math.sin(@th - Math::PI * 3/4)
        line(@cx, @cy, lx, ly) # 左

        line(rx, ry, px, py)
        line(lx, ly, px, py)
    end
end

def setup
  createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT)
  frameRate(FRAMERATE)
  $arrows = ARROWS_COUNT.times.map { Arrow.new }
end

def draw
  clear
  dt = deltaTime / 1000.0 # milliseconds
  $arrows.each do |arrow|
    arrow.move(dt, mouseX, mouseY)
    arrow.draw
  end
  text("dt:#{dt}", 20, 20)
  text("mouse:#{mouseX},#{mouseY}", 20, 50)
end

P5::init()
</script>
